# Changelog

## [2.1.0] - 2024-11-26

### 🎯 重大改进：智能验证系统

#### 新增功能
- ✅ **所有核心操作支持智能验证**
  - `mobile_click` - 自动检测页面变化，确保点击真的生效
  - `mobile_input` - 自动验证文本是否正确输入
  - `mobile_swipe` - 自动检测页面内容变化，识别列表边界
  - `mobile_press_key` - 自动验证按键效果 + 搜索键智能回退

#### 核心特性
- **实时验证**：操作前后对比页面状态，返回真实结果
- **智能回退**：搜索键(SEARCH)无效时自动尝试回车键(ENTER)
- **详细反馈**：返回验证状态、页面变化、实际结果、警告信息
- **向后兼容**：默认启用验证，可选 `verify=False` 快速模式

#### 验证逻辑
1. **click** - 检测页面变化超过 5%
2. **type_text** - 读取输入框实际文本进行验证
3. **swipe** - 检测页面内容变化超过 3%（适应滑动场景）
4. **press_key** - 检测页面变化 + 搜索键双重方案

#### 使用示例
```python
# 默认启用验证（推荐）
await client.click("按钮")           # ✅ 自动验证
await client.type_text("输入框", "文本")  # ✅ 自动验证
await client.swipe("up")            # ✅ 自动验证
await client.press_key("search")    # ✅ 自动验证+智能回退

# 可选快速模式（不验证）
await client.click("按钮", verify=False)
```

#### 返回信息
```json
{
  "success": true,
  "verified": true,
  "page_changed": true,
  "input_verified": true,
  "actual_text": "...",
  "fallback_used": false,
  "warning": "..."
}
```

### 🐛 Bug 修复
- 修复所有操作可能出现的"假成功"问题
- 修复搜索键在某些应用/输入法中不生效的问题
- 修复操作成功但页面未响应的误报

### 📚 文档更新
- 新增智能验证功能详细说明
- 新增使用示例和最佳实践
- 更新工具说明，标注验证支持

---

## [2.0.3] - 2024-11-20

### 新增功能
- ✅ 智能等待机制（SmartWait）
- ✅ 测试脚本生成（生成独立的 pytest 脚本）
- ✅ 基础工具不需要 AI 密钥

### 改进
- 优化页面加载等待逻辑
- 改进弹窗处理机制
- 生成的测试脚本只依赖 uiautomator2

---

## [2.0.0] - 2024-11-01

### 重大更新
- ✅ AI 功能可选化
- ✅ 基础工具模式（不需要 AI）
- ✅ 智能工具模式（需要 AI）
- ✅ 跨平台支持（Android + iOS）

### 核心特性
- 18 个移动端自动化工具
- 与 Cursor AI 深度集成
- MCP 协议支持
- 视觉识别支持

---

## [1.x.x] - 早期版本

早期版本的功能和改进记录...

