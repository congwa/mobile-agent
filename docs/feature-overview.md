# Mobile Agent â€” åŠŸèƒ½ä¸šåŠ¡ä»‹ç»

## äº§å“å®šä½

Mobile Agent æ˜¯ä¸€ä¸ª **AI é©±åŠ¨çš„ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æ“æ§å°**ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯å³å¯æ“æ§ Android/iOS æ‰‹æœºå®Œæˆå„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

ç”¨æˆ·åªéœ€åœ¨èŠå¤©ç•Œé¢æè¿°æƒ³è¦æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚"æ‰“å¼€å¾®ä¿¡ï¼Œå‘ä¸€æ¡æ¶ˆæ¯ç»™å¼ ä¸‰"ï¼‰ï¼ŒAI Agent ä¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ã€è°ƒç”¨è®¾å¤‡æ“æ§å·¥å…·ã€å®æ—¶åé¦ˆæ‰§è¡Œè¿‡ç¨‹å’Œæˆªå›¾ã€‚

---

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€ ç”¨æˆ·ç”µè„‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  Electron App (æ¡Œé¢å®¢æˆ·ç«¯)                                       â”‚
â”‚  â”œâ”€â”€ React å‰ç«¯ UI â€” èŠå¤©å¯¹è¯ã€è®¾å¤‡é¢„è§ˆã€å†å²è®°å½•ã€è®¾ç½®          â”‚
â”‚  â”œâ”€â”€ MCP Manager â€” ç®¡ç† MCP Server å­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ               â”‚
â”‚  â””â”€â”€ oRPC â€” ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡                                â”‚
â”‚                                                                  â”‚
â”‚  MCP Server (Python, HTTP :3100)                                â”‚
â”‚  â”œâ”€â”€ SSE ç«¯ç‚¹ â€” ä¾› Backend è¿æ¥                                 â”‚
â”‚  â”œâ”€â”€ 27 ä¸ªè®¾å¤‡æ“æ§å·¥å…· â€” æˆªå›¾ã€ç‚¹å‡»ã€è¾“å…¥ã€æ»‘åŠ¨ã€Appç®¡ç†ç­‰       â”‚
â”‚  â””â”€â”€ è®¾å¤‡è¿æ¥ç®¡ç† â€” ADB (Android) / WDA (iOS)                   â”‚
â”‚                                                                  â”‚
â”‚  Backend (FastAPI, HTTP :8088)                                  â”‚
â”‚  â”œâ”€â”€ LangGraph AI Agent â€” ç†è§£ç”¨æˆ·æ„å›¾ã€è§„åˆ’æ“ä½œæ­¥éª¤            â”‚
â”‚  â”œâ”€â”€ SSE æµå¼èŠå¤© â€” å®æ—¶æ¨é€ AI å›å¤å’Œå·¥å…·æ‰§è¡Œç»“æœ              â”‚
â”‚  â”œâ”€â”€ ä¼šè¯æŒä¹…åŒ– â€” SQLite å­˜å‚¨èŠå¤©å†å²å’Œæˆªå›¾                     â”‚
â”‚  â””â”€â”€ é…ç½®ç®¡ç† â€” LLM/MCP/Agent å‚æ•°çƒ­æ›´æ–°                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ USB / WiFi
         â–¼
  ğŸ“± Android / iOS æ‰‹æœº
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. è‡ªç„¶è¯­è¨€å¯¹è¯æ“æ§æ‰‹æœº

- åœ¨èŠå¤©ç•Œé¢ç”¨è‡ªç„¶è¯­è¨€æè¿°ä»»åŠ¡
- AI Agent è‡ªåŠ¨æ‹†è§£ä¸ºå…·ä½“æ“ä½œæ­¥éª¤
- æ”¯æŒå¤šè½®å¯¹è¯ã€ä¸Šä¸‹æ–‡ç†è§£
- å®æ—¶æµå¼è¿”å›æ‰§è¡Œè¿‡ç¨‹

### 2. 27 ä¸ªè®¾å¤‡æ“æ§å·¥å…·

| ç±»åˆ« | å·¥å…· | è¯´æ˜ |
|------|------|------|
| **å…ƒç´ å®šä½** | `mobile_list_elements` | åˆ—å‡ºé¡µé¢å¯äº¤äº’å…ƒç´ ï¼ˆToken ä¼˜åŒ–ï¼Œä¼˜å…ˆæ¨èï¼‰ |
| **æˆªå›¾** | `mobile_take_screenshot` | æˆªå›¾æŸ¥çœ‹å±å¹•å†…å®¹ |
| | `mobile_screenshot_with_som` | Set-of-Mark æ ‡æ³¨æˆªå›¾ï¼ˆå…ƒç´ ç¼–å·ï¼‰ |
| | `mobile_get_screen_size` | è·å–å±å¹•å°ºå¯¸ |
| **ç‚¹å‡»** | `mobile_click_by_text` | æŒ‰æ–‡æœ¬ç‚¹å‡» |
| | `mobile_click_by_id` | æŒ‰ resource-id ç‚¹å‡» |
| | `mobile_click_by_coordinate` | æŒ‰åæ ‡ç‚¹å‡» |
| | `mobile_click_by_som` | æŒ‰ SoM ç¼–å·ç‚¹å‡» |
| **è¾“å…¥** | `mobile_type_text` | è¾“å…¥æ–‡æœ¬ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰ |
| | `mobile_press_key` | æŒ‰é”®ï¼ˆè¿”å›ã€Homeã€Enterï¼‰ |
| | `mobile_hide_keyboard` | æ”¶èµ·é”®ç›˜ |
| **æ»‘åŠ¨** | `mobile_swipe` | ä¸Šä¸‹å·¦å³æ»‘åŠ¨ |
| | `mobile_scroll_to_text` | æ»šåŠ¨ç›´åˆ°æ–‡æœ¬å¯è§ |
| **é•¿æŒ‰** | `mobile_long_press_*` | é•¿æŒ‰æ“ä½œï¼ˆæ–‡æœ¬/ID/åæ ‡ï¼‰ |
| **App ç®¡ç†** | `mobile_launch_app` | å¯åŠ¨åº”ç”¨ |
| | `mobile_stop_app` | åœæ­¢åº”ç”¨ |
| | `mobile_get_current_app` | è·å–å½“å‰åº”ç”¨ä¿¡æ¯ |
| **è®¾å¤‡ç®¡ç†** | `mobile_list_devices` | åˆ—å‡ºè¿æ¥çš„è®¾å¤‡ |
| | `mobile_check_connection` | æ£€æŸ¥è¿æ¥çŠ¶æ€ |

### 3. å®æ—¶æˆªå›¾é¢„è§ˆ

- æ¯æ¬¡å·¥å…·æ“ä½œåè‡ªåŠ¨æˆªå›¾åé¦ˆ
- Dashboard å®æ—¶æ˜¾ç¤ºè®¾å¤‡å±å¹•
- æˆªå›¾å­˜å‚¨åœ¨ SQLite ä¸­ï¼Œå¯é€šè¿‡ API è·å–

### 4. ä¼šè¯å†å²ç®¡ç†

- èŠå¤©æ¶ˆæ¯è‡ªåŠ¨æŒä¹…åŒ–ï¼ˆç”¨æˆ·æ¶ˆæ¯ã€AI å›å¤ã€å·¥å…·è°ƒç”¨ï¼‰
- æ”¯æŒæŒ‰æ—¶é—´æŸ¥çœ‹å†å²ä¼šè¯
- å¯åˆ é™¤å•ä¸ªä¼šè¯

### 5. é…ç½®çƒ­æ›´æ–°

- **LLM é…ç½®**ï¼šæ¨¡å‹åç§°ã€API Keyã€Temperature ç­‰
- **MCP é…ç½®**ï¼šMCP Server SSE URL
- **Agent é…ç½®**ï¼šç³»ç»Ÿæç¤ºè¯ã€æœ€å¤§æ­¥æ•°
- æ”¯æŒæµ‹è¯• LLM è¿æ¥ã€é‡æ–°è¿æ¥ MCP Server

### 6. è·¨å¹³å°è®¾å¤‡æ”¯æŒ

| å¹³å° | è¿æ¥æ–¹å¼ | ä¾èµ– |
|------|---------|------|
| **Android** | ADB + UIAutomator2 | `uiautomator2`, `adbutils` |
| **iOS** | tidevice + WebDriverAgent | `tidevice`, `facebook-wda` |

- è‡ªåŠ¨æ£€æµ‹è®¾å¤‡å¹³å°
- è¿æ¥ä¿æ´»ä¸æ–­çº¿è‡ªåŠ¨é‡è¿
- é”å®šç«–å±æ–¹å‘

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯ (Electron + React)

- **Electron 40** â€” æ¡Œé¢åº”ç”¨æ¡†æ¶
- **React 19** â€” UI æ¡†æ¶
- **TanStack Router** â€” è·¯ç”±ç®¡ç†
- **Zustand** â€” çŠ¶æ€ç®¡ç†
- **shadcn/ui + TailwindCSS 4** â€” UI ç»„ä»¶ä¸æ ·å¼
- **@embedease/chat-sdk** â€” SSE æµå¼èŠå¤©å®¢æˆ·ç«¯
- **oRPC** â€” ä¸»è¿›ç¨‹ â†” æ¸²æŸ“è¿›ç¨‹ç±»å‹å®‰å…¨é€šä¿¡

### åç«¯ (FastAPI + LangGraph)

- **FastAPI** â€” HTTP API æ¡†æ¶
- **LangGraph** â€” AI Agent ç¼–æ’æ¡†æ¶
- **LangChain** â€” LLM é›†æˆ
- **SQLite (aiosqlite)** â€” å¼‚æ­¥æ•°æ®æŒä¹…åŒ–
- **SSE** â€” æµå¼å“åº”æ¨é€

### MCP Server (Python)

- **MCP SDK** â€” Model Context Protocol å®ç°
- **Starlette + Uvicorn** â€” SSE HTTP æœåŠ¡å™¨
- **UIAutomator2** â€” Android è®¾å¤‡è‡ªåŠ¨åŒ–
- **facebook-wda** â€” iOS è®¾å¤‡è‡ªåŠ¨åŒ–
- **OpenCV + Pillow** â€” å›¾åƒå¤„ç†ä¸æ¨¡æ¿åŒ¹é…

### æ‰“åŒ…åˆ†å‘

- **Electron Forge** â€” æ„å»ºä¸æ‰“åŒ…
- **extraResource** â€” Python ä»£ç  + è™šæ‹Ÿç¯å¢ƒå†…åµŒ
- **bundle-python.sh** â€” è‡ªåŠ¨æ„å»º Python è¿è¡Œæ—¶ç¯å¢ƒ
- æ‰“åŒ…å **å¼€ç®±å³ç”¨**ï¼Œç”¨æˆ·æ— éœ€å®‰è£… Python æˆ–ä¾èµ–

---

## å¯åŠ¨æµç¨‹

```
ç”¨æˆ·åŒå‡» Mobile Agent.app
  â”‚
  â”œâ”€â”€ Electron ä¸»è¿›ç¨‹å¯åŠ¨
  â”‚   â”œâ”€â”€ startMcpServer()
  â”‚   â”‚   â”œâ”€â”€ getPythonPath() â†’ æ£€æµ‹å†…åµŒ .venv_bundle
  â”‚   â”‚   â”œâ”€â”€ checkPythonReady() â†’ éªŒè¯ Python + ä¾èµ–
  â”‚   â”‚   â””â”€â”€ spawn python mcp_server.py --sse --port 3100
  â”‚   â”‚       â””â”€â”€ MCP Server HTTP å°±ç»ª (:3100)
  â”‚   â”‚
  â”‚   â”œâ”€â”€ createWindow() â†’ åŠ è½½ React UI
  â”‚   â””â”€â”€ setupORPC() â†’ IPC é€šä¿¡å°±ç»ª
  â”‚
  â”œâ”€â”€ ç”¨æˆ·å¯åŠ¨ Backendï¼ˆç‹¬ç«‹è¿›ç¨‹ï¼‰
  â”‚   â””â”€â”€ uvicorn mobile_agent.api.app:app --port 8088
  â”‚       â”œâ”€â”€ AgentService åˆå§‹åŒ–
  â”‚       â”œâ”€â”€ SSE è¿æ¥ MCP Server :3100
  â”‚       â””â”€â”€ AI Agent å°±ç»ª
  â”‚
  â””â”€â”€ å‰ç«¯è‡ªåŠ¨æ£€æµ‹çŠ¶æ€ â†’ æ˜¾ç¤º"å·²è¿æ¥"â†’ å¼€å§‹èŠå¤©
```

---

## é¡¹ç›®ç›®å½•ç»“æ„

```
mobile-mcp/
â”œâ”€â”€ frontend/                  # Electron + React æ¡Œé¢å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts            # Electron ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ mcp-manager.ts     # MCP Server è¿›ç¨‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ components/pages/  # React é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/            # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ lib/api.ts         # Backend REST API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ forge.config.ts        # Electron Forge æ‰“åŒ…é…ç½®
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ bundle-python.sh   # Python ç¯å¢ƒæ‰“åŒ…è„šæœ¬
â”‚
â”œâ”€â”€ agent-app/                 # FastAPI Backend
â”‚   â””â”€â”€ src/mobile_agent/
â”‚       â”œâ”€â”€ api/               # REST API ç«¯ç‚¹
â”‚       â”œâ”€â”€ core/              # AgentService æ ¸å¿ƒæœåŠ¡
â”‚       â””â”€â”€ streaming/         # SSE æµå¼å“åº”å¤„ç†
â”‚
â”œâ”€â”€ mcp_tools/
â”‚   â””â”€â”€ mcp_server.py          # MCP Server (SSE/stdio æ¨¡å¼)
â”‚
â”œâ”€â”€ core/                      # è®¾å¤‡ç®¡ç†æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ mobile_client.py       # ç»Ÿä¸€è®¾å¤‡å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ device_manager.py      # Android ADB ç®¡ç†
â”‚   â”œâ”€â”€ ios_client_wda.py      # iOS WDA å®¢æˆ·ç«¯
â”‚   â””â”€â”€ basic_tools_lite.py    # 27 ä¸ª MCP å·¥å…·å®ç°
â”‚
â””â”€â”€ docs/                      # æ–‡æ¡£
    â”œâ”€â”€ architecture.md         # ç³»ç»Ÿäº¤äº’æ¶æ„
    â”œâ”€â”€ device-management.md    # è®¾å¤‡è¿æ¥ç®¡ç†æ‹“æ‰‘
    â”œâ”€â”€ electron-mcp-packaging.md # Electron æ‰“åŒ…æµç¨‹
    â””â”€â”€ feature-overview.md     # æœ¬æ–‡æ¡£
```
