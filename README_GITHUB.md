# Mobile MCP AI

<div align="center">

[![PyPI version](https://img.shields.io/pypi/v/mobile-mcp-ai.svg)](https://pypi.org/project/mobile-mcp-ai/)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-Apache%202.0-green.svg)](LICENSE)
[![GitHub Stars](https://img.shields.io/github/stars/test111ddff-hash/mobile-mcp-ai?style=social)](https://github.com/test111ddff-hash/mobile-mcp-ai)

**AI-Powered Mobile Test Automation Framework**

[English](#english) | [ç®€ä½“ä¸­æ–‡](#ç®€ä½“ä¸­æ–‡)

**è§‰å¾—å¥½ç”¨ï¼Ÿè¯·ç»™ä¸ª â­ Stare æ”¯æŒä¸€ä¸‹ï¼**  
**Find it useful? Give us a â­ Star!**

</div>

---

## ç®€ä½“ä¸­æ–‡

ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒé€šè¿‡ Cursor AI ç”¨è‡ªç„¶è¯­è¨€æ‰§è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ pytest æµ‹è¯•ç”¨ä¾‹ã€‚

### åŠŸèƒ½ç‰¹æ€§

#### ğŸ¯ è‡ªç„¶è¯­è¨€é©±åŠ¨çš„æ™ºèƒ½æµ‹è¯•
- **é›¶ä»£ç æµ‹è¯•**ï¼šç”¨è‡ªç„¶è¯­è¨€æè¿°æµ‹è¯•æµç¨‹ï¼ŒAI è‡ªåŠ¨ç†è§£å¹¶æ‰§è¡Œæ¯ä¸€æ­¥æ“ä½œ
- **æ™ºèƒ½äº¤äº’**ï¼šè‡ªåŠ¨å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œæ™ºèƒ½é‡è¯•å’Œé”™è¯¯æ¢å¤
- **é™ä½é—¨æ§›**ï¼šæ— éœ€ç¼–å†™å¤æ‚è„šæœ¬ï¼Œé™ä½æµ‹è¯•é—¨æ§› 90%+

#### ğŸ¨ æ™ºèƒ½å®šä½ç­–ç•¥
- **å¤šçº§é™çº§å®šä½**ï¼šå¤šå±‚å®šä½ç­–ç•¥æ™ºèƒ½é™çº§
- **é«˜æˆåŠŸç‡**ï¼šå®šä½æˆåŠŸç‡ 95%+ï¼Œå¹³å‡è€—æ—¶ <100msï¼ˆç¼“å­˜å‘½ä¸­ <5msï¼‰
- **æ™ºèƒ½è¯„åˆ†ç®—æ³•**ï¼šåŸºäºç±»å‹åŒ¹é…ã€æ–‡æœ¬åŒ¹é…ã€ä½ç½®æƒé‡ç­‰å¤šç»´åº¦è¯„åˆ†
- **å¤šæ¨¡æ€ AI**ï¼šæ”¯æŒè§†è§‰è¯†åˆ«ï¼Œåº”å¯¹å¤æ‚å®šä½åœºæ™¯

#### ğŸš€ ä¸€é”®ç”Ÿæˆ pytest æµ‹è¯•è„šæœ¬
- **è‡ªåŠ¨è„šæœ¬ç”Ÿæˆ**ï¼šåŸºäºæ“ä½œå†å²è‡ªåŠ¨ç”Ÿæˆæ ‡å‡† pytest æ ¼å¼æµ‹è¯•è„šæœ¬
- **100% å¯æ‰§è¡Œ**ï¼šä½¿ç”¨å·²éªŒè¯çš„å®šä½æ–¹å¼ï¼Œç¡®ä¿è„šæœ¬å¯ç›´æ¥è¿è¡Œ
- **å®Œæ•´æ”¯æŒ**ï¼šæ”¯æŒ pytest fixtureã€å‚æ•°åŒ–ã€Allure æŠ¥å‘Šç­‰æ‰€æœ‰ç‰¹æ€§
- **æ‰¹é‡æ‰§è¡Œ**ï¼šç”Ÿæˆçš„è„šæœ¬å¯ä¸å…¶ä»–æµ‹è¯•ç”¨ä¾‹ä¸€èµ·æ‰¹é‡è¿è¡Œ

#### ğŸŒ è·¨å¹³å°æ”¯æŒ
- **åŒå¹³å°æ”¯æŒ**ï¼šå®Œç¾æ”¯æŒ Android å’Œ iOS å¹³å°
- **ç»Ÿä¸€æ¥å£**ï¼šé€šè¿‡é€‚é…å™¨æ¨¡å¼å®ç° 80%+ ä»£ç å¤ç”¨ç‡
- **è®¾å¤‡ç®¡ç†**ï¼šè‡ªåŠ¨æ£€æµ‹å’Œç®¡ç†è¿æ¥çš„è®¾å¤‡ï¼Œæ”¯æŒå¤šè®¾å¤‡åˆ‡æ¢

#### ğŸ¤– ä¸ Cursor AI æ·±åº¦é›†æˆ
- **MCP åè®®**ï¼šåŸºäº Model Context Protocolï¼Œä¸ Cursor AI æ— ç¼é›†æˆ
- **20+ å·¥å…·**ï¼šæä¾›ä¸°å¯Œçš„ç§»åŠ¨ç«¯æ“ä½œå·¥å…·ï¼ŒAI æ™ºèƒ½è°ƒç”¨
- **AI å¢å¼º**ï¼šæ”¯æŒå¤šå¹³å° AIï¼ˆCursor/Claude/OpenAI/Geminiï¼‰è‡ªåŠ¨æ£€æµ‹ä¸åˆ‡æ¢

#### âš¡ æ€§èƒ½ä¼˜åŒ–
- **XML ç¼“å­˜æœºåˆ¶**ï¼šTTL 1 ç§’ç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯»å–å¼€é”€
- **å…ƒç´ é¢„è¿‡æ»¤**ï¼šæŒ‰ç±»å‹ã€ä½ç½®ã€å±æ€§é¢„è¿‡æ»¤ï¼Œå‡å°‘ 50%+ éå†
- **å•æ¬¡è¯»å–å¤ç”¨**ï¼šé¿å… 400-1000ms çš„é‡å¤ XML è¯»å–å¼€é”€

### å®‰è£…

```bash
pip install mobile-mcp-ai
```

### å¿«é€Ÿå¼€å§‹

#### 1. é…ç½® Cursor MCP

åˆ›å»º `.cursor/mcp.json` æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•æˆ–ç”¨æˆ·ç›®å½• `~/.cursor/mcp.json`ï¼‰ï¼š

```json
{
  "mcpServers": {
    "mobile-mcp-ai": {
      "command": "python",
      "args": ["-m", "mobile_mcp.mcp.mcp_server"],
      "env": {
        "MOBILE_DEVICE_ID": "auto"
      }
    }
  }
}
```

è¯¦ç»†é…ç½®è¯´æ˜è¯·æŸ¥çœ‹ï¼š[å¯åŠ¨æŒ‡å—](docs/START_GUIDE.md)

#### 2. è¿æ¥è®¾å¤‡

```bash
# Android è®¾å¤‡
adb devices  # ç¡®è®¤è®¾å¤‡å¯è§
```

#### 3. é‡å¯ Cursor

é…ç½®å®Œæˆåï¼Œå®Œå…¨é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ Cursorã€‚

#### 4. å¼€å§‹ä½¿ç”¨

é‡å¯ Cursor åï¼Œåœ¨èŠå¤©çª—å£ä¸­ç”¨è‡ªç„¶è¯­è¨€æè¿°æµ‹è¯•æµç¨‹ï¼š

```
å¸®æˆ‘æµ‹è¯•ç™»å½•åŠŸèƒ½ï¼š
1. å¯åŠ¨ com.example.app
2. ç‚¹å‡»ç™»å½•æŒ‰é’®
3. è¾“å…¥ç”¨æˆ·å admin
4. è¾“å…¥å¯†ç  password
5. ç‚¹å‡»æäº¤æŒ‰é’®
6. éªŒè¯é¡µé¢æ˜¯å¦æ˜¾ç¤º"æ¬¢è¿"
```

AI ä¼šè‡ªåŠ¨ç†è§£å¹¶æ‰§è¡Œæ¯ä¸€æ­¥æ“ä½œï¼Œæ™ºèƒ½å®šä½å…ƒç´ ï¼Œå¤„ç†å¼‚å¸¸æƒ…å†µã€‚

### ä½¿ç”¨ç¤ºä¾‹

#### æ‰§è¡Œæµ‹è¯•

åœ¨ Cursor ä¸­ç”¨è‡ªç„¶è¯­è¨€æè¿°æµ‹è¯•æµç¨‹ï¼ŒAI ä¼šè‡ªåŠ¨æ‰§è¡Œæ¯ä¸€æ­¥æ“ä½œã€‚

#### ç”Ÿæˆ pytest è„šæœ¬

æ‰§è¡Œå®Œæµ‹è¯•åï¼Œå¯ä»¥ç”Ÿæˆ pytest æ ¼å¼çš„æµ‹è¯•è„šæœ¬ï¼š

```
å¸®æˆ‘ç”Ÿæˆ pytest æµ‹è¯•è„šæœ¬ï¼Œæµ‹è¯•åç§°æ˜¯"å»ºè®®å‘å¸–æµ‹è¯•"ï¼ŒåŒ…åæ˜¯ com.example.appï¼Œæ–‡ä»¶åæ˜¯ test_post
```

ç”Ÿæˆçš„è„šæœ¬ä¿å­˜åœ¨ `tests/` ç›®å½•ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼š

```bash
pytest tests/test_post.py -v
```

### å¯ç”¨å·¥å…·

é…ç½®å®Œæˆåï¼ŒCursor AI å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š

- **è®¾å¤‡ç®¡ç†**ï¼š`mobile_list_devices`, `mobile_get_current_package`, `mobile_get_screen_size` ç­‰
- **äº¤äº’æ“ä½œ**ï¼š`mobile_click`, `mobile_input`, `mobile_swipe`, `mobile_press_key` ç­‰
- **é¡µé¢åˆ†æ**ï¼š`mobile_snapshot`, `mobile_take_screenshot`, `mobile_assert_text`
- **åº”ç”¨ç®¡ç†**ï¼š`mobile_launch_app`, `mobile_list_apps`, `mobile_install_app` ç­‰
- **AI å¢å¼º**ï¼š`mobile_generate_test_script`ï¼ˆç”Ÿæˆ pytest è„šæœ¬ï¼‰

å®Œæ•´å·¥å…·åˆ—è¡¨å’Œä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹æ–‡æ¡£ã€‚

### æ–‡æ¡£

- [å¯åŠ¨æŒ‡å—](docs/START_GUIDE.md) - å®Œæ•´çš„å®‰è£…å’Œé…ç½®æ­¥éª¤
- [å¦‚ä½•ç”Ÿæˆæµ‹è¯•è„šæœ¬](docs/å¦‚ä½•ç”Ÿæˆæµ‹è¯•è„šæœ¬.md) - æµ‹è¯•è„šæœ¬ç”ŸæˆæŒ‡å—

### License

Apache License 2.0

### è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## English

Mobile test automation framework that supports natural language testing through Cursor AI and generates pytest test cases.

### Features

#### ğŸ¯ Natural Language Driven Intelligent Testing
- **Zero-Code Testing**: Describe test flows in natural language, AI automatically understands and executes each step
- **Smart Interaction**: Automatically handles exceptions, intelligent retry and error recovery
- **Low Barrier**: No need to write complex scripts, reducing testing barriers by 90%+

#### ğŸ¨ Smart Locator Strategy
- **Multi-Level Fallback**: Intelligent multi-layer locator strategy fallback
- **High Success Rate**: 95%+ locator success rate, average time <100ms (cache hit <5ms)
- **Smart Scoring Algorithm**: Multi-dimensional scoring based on type matching, text matching, position weight, etc.
- **Multimodal AI**: Supports visual recognition for complex locator scenarios

#### ğŸš€ One-Click pytest Script Generation
- **Auto Script Generation**: Automatically generates standard pytest format test scripts based on operation history
- **100% Executable**: Uses verified locator methods to ensure scripts can run directly
- **Full Support**: Supports all pytest features including fixtures, parameterization, Allure reports, etc.
- **Batch Execution**: Generated scripts can be run together with other test cases

#### ğŸŒ Cross-Platform Support
- **Dual Platform Support**: Perfect support for Android and iOS platforms
- **Unified Interface**: 80%+ code reuse through adapter pattern
- **Device Management**: Automatically detects and manages connected devices, supports multi-device switching

#### ğŸ¤– Deep Integration with Cursor AI
- **MCP Protocol**: Based on Model Context Protocol, seamlessly integrated with Cursor AI
- **20+ Tools**: Provides rich mobile operation tools, intelligently called by AI
- **AI Enhancement**: Supports multi-platform AI (Cursor/Claude/OpenAI/Gemini) auto-detection and switching

#### âš¡ Performance Optimization
- **XML Cache Mechanism**: 1-second TTL cache reduces duplicate read overhead
- **Element Pre-filtering**: Pre-filter by type, position, attributes, reducing 50%+ traversal
- **Single Read Reuse**: Avoids 400-1000ms duplicate XML read overhead

### Installation

```bash
pip install mobile-mcp-ai
```

### Quick Start

#### 1. Configure Cursor MCP

Create `.cursor/mcp.json` file (in project root or user directory `~/.cursor/mcp.json`):

```json
{
  "mcpServers": {
    "mobile-mcp-ai": {
      "command": "python",
      "args": ["-m", "mobile_mcp.mcp.mcp_server"],
      "env": {
        "MOBILE_DEVICE_ID": "auto"
      }
    }
  }
}
```

For detailed configuration, see: [Start Guide](docs/START_GUIDE.md)

#### 2. Connect Device

```bash
# Android device
adb devices  # Confirm device is visible
```

#### 3. Restart Cursor

After configuration, completely exit and restart Cursor.

#### 4. Start Using

After restarting Cursor, describe test flows in natural language in the chat window:

```
Help me test the login function:
1. Launch com.example.app
2. Click login button
3. Enter username admin
4. Enter password password
5. Click submit button
6. Verify page displays "Welcome"
```

AI will automatically understand and execute each step, intelligently locate elements, and handle exceptions.

### Usage Examples

#### Execute Tests

Describe test flows in natural language in Cursor, and AI will automatically execute each step.

#### Generate pytest Scripts

After executing tests, you can generate pytest format test scripts:

```
Help me generate a pytest test script, test name is "Post Test", package name is com.example.app, filename is test_post
```

Generated scripts are saved in the `tests/` directory and can be run directly:

```bash
pytest tests/test_post.py -v
```

### Available Tools

After configuration, Cursor AI can use the following tools:

- **Device Management**: `mobile_list_devices`, `mobile_get_current_package`, `mobile_get_screen_size`, etc.
- **Interaction**: `mobile_click`, `mobile_input`, `mobile_swipe`, `mobile_press_key`, etc.
- **Page Analysis**: `mobile_snapshot`, `mobile_take_screenshot`, `mobile_assert_text`
- **App Management**: `mobile_launch_app`, `mobile_list_apps`, `mobile_install_app`, etc.
- **AI Enhancement**: `mobile_generate_test_script` (generate pytest scripts)

See documentation for complete tool list and usage instructions.

### Documentation

- [Start Guide](docs/START_GUIDE.md) - Complete installation and configuration steps
- [How to Generate Test Scripts](docs/å¦‚ä½•ç”Ÿæˆæµ‹è¯•è„šæœ¬.md) - Test script generation guide

### License

Apache License 2.0

### Contributing

Issues and Pull Requests are welcome!

---

<div align="center">

**â­ è§‰å¾—å¥½ç”¨ï¼Ÿè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼â­**  
**â­ Find it useful? Give us a Star! â­**

[![GitHub Stars](https://img.shields.io/github/stars/test111ddff-hash/mobile-mcp-ai?style=social)](https://github.com/test111ddff-hash/mobile-mcp-ai/stargazers)

[GitHub Repository](https://github.com/test111ddff-hash/mobile-mcp-ai) | [Gitee Mirror](https://gitee.com/chang-xinping/mobile-automation-mcp-service) | [PyPI](https://pypi.org/project/mobile-mcp-ai/)

Made with â¤ï¸ by Douzi Team

</div>

